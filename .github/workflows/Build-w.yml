name: Build-w.yml    
on:  
  workflow_dispatch:
jobs:  
  build:  
    runs-on: windows-latest  # 使用Windows运行器来构建EXE文件
    env:  
      SOLUTION_FILE: WindowsDiskClear.sln  # 替换为你的解决方案文件名  
      PROJECT_FILE: WindowsDiskClear.csproj
  
    steps:  
    - name: Checkout  
      uses: actions/checkout@v3  
      with:  
        fetch-depth: 0  
  
    - name: Install .NET Core  
      uses: actions/setup-dotnet@v3  
      with:  
        dotnet-version: 6.0.x  
  
    - name: Setup MSBuild.exe  
      uses: microsoft/setup-msbuild@v1.0.2  
  
    - name: Execute unit tests  
      run: dotnet test  
  
    - name: Restore the application  
      run: msbuild $env:Solution_Name /t:Restore /p:Configuration=$env:Configuration  
  
    # 发布项目（生成EXE文件）  
    - name: Publish  
      run: dotnet publish --no-build --configuration Release --output ./publish  
  
    # 上传构建产物（可选）  
    - name: Upload artifact  
      uses: actions/upload-artifact@v2  
      with:  
        name: my-app-exe  
        path: ./publish/  
  
    # 如果你想要将EXE文件作为构建的一部分上传到GitHub Releases，你可以添加额外的步骤来实现这一点。
